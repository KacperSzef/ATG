<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="Andzix the Game">
    <meta name="keywords" content="HTML, JS, CSS, GRA, SUPERGRA">
    <meta name="author" content="ekipa">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style_zse.css">
    <link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One|Knewave|Krona+One|Monofett|Nosifer|Oldenburg|Press+Start+2P&display=swap" rel="stylesheet">
</head>

<body>
    <div class="wybierz_tlo">
        <p> WYBIERZ TŁO: </p>
    </div>

    <div class="kontener_gry">

        <div class="tlo_gry">
            <div class="ramka_tla"> <input onclick="wyczysc()" type="image" src="zse.jpg" width="450" height="450"></div>
        </div>

        <div class="tlo2_gry">
            <div class="ramka2_tla"><input onclick="wyczysc2()" type="image" src="biedra.jpg" width="450" height="450"></div>
        </div>

        <div class="tlo3_gry">
            <div class="ramka3_tla"><input onclick="wyczysc3()" type="image" src="mostostal.jpg" width="450" height="450"></div>
        </div>
    </div>






    <div class="kontener_tla">
        <div class="tlo_gry"> <img src="zse.jpg" width="1344" height="764"> </div>
    </div>
    <div class="kontener2_tla">
        <div class="tlo2_gry"><img src="biedra.jpg" width="1344" height="764"> </div>
    </div>
    <div class="kontener3_tla">
        <div class="tlo3_gry"> <img src="mostostal.jpg" width="1344" height="764"> </div>
    </div>

    <div class="kontener">
        <div class="pkt"><a id="punkty">0</p></div>
                <div class="zycia"><a id="zycia">0</p></div>
                <div class="pkt_many">
                    <meter id="pkt_many" min="0" max="10"></meter>
                </div>
                <div class="pkt_serce"></div>
                <div class="andzix"></div>
                <div class="kiep"></div> 
                <div class="mana"></div>
                <div class="serce"></div>
            
    <script>

           
            const wybierz_tlo = document.querySelector(".wybierz_tlo"); // zadeklarowanie obiektów w kodzie js
            const kontener_gry = document.querySelector(".kontener_gry"); // zadeklarowanie obiektów w kodzie js
            const kontener_tla = document.querySelector(".kontener_tla"); // zadeklarowanie obiektów w kodzie js  
            const kontener2_tla = document.querySelector(".kontener2_tla"); // zadeklarowanie obiektów w kodzie js  
            const kontener3_tla = document.querySelector(".kontener3_tla"); // zadeklarowanie obiektów w kodzie js  


            kontener_tla.style.display = "none";
            kontener2_tla.style.display = "none";
            kontener3_tla.style.display = "none";
        ;

     function wyczysc()
            {
               
                wybierz_tlo.style.display = "none";
                kontener_gry.style.display = "none";

                kontener.style.display = "block";
                kontener_tla.style.display = "block";

                setTimeout(() => update(),3000);
                setTimeout(() => spawn(),3000);
              
            }

            function wyczysc2()
            {
               
                wybierz_tlo.style.display = "none";
                kontener_gry.style.display = "none";

                kontener.style.display = "block";
                kontener2_tla.style.display = "block";
                setTimeout(() => update(),3000);
                setTimeout(() => spawn(),3000);
              
            }

            function wyczysc3()
            {
               
                wybierz_tlo.style.display = "none";
                kontener_gry.style.display = "none";

                kontener.style.display = "block";
                kontener3_tla.style.display = "block";
                setTimeout(() => update(),3000);
                setTimeout(() => spawn(),3000);
              
            }
    
</script>

<script>
   
    //wersja zawiera zdolnosc na spacji


    // alert(Math.floor(Math.random()*1500+1));
    let koniec={};
 koniec=false;

const kontener=document.querySelector(".kontener");  
const andzix=document.querySelector(".andzix");
const pkt=document.querySelector(".pkt");
const kiepp = document.querySelector(".kiep");
const zycia=document.querySelector(".zycia");
const mana=document.querySelector(".mana");
const serce=document.querySelector(".serce");
const kiep = [kiepp.cloneNode(true),kiepp.cloneNode(true),kiepp.cloneNode(true)]; //<div class="to-clone"></div>
kiepp.style.left = -40 + "px";kiepp.style.display = "none";
let player = {
		x: 30,
		speed: 20, 
        KiepSpeed: 2,
		zycia: 10,
        w: 100
	}



let ileKiepow = 0;


odliczanie();
kontener.appendChild(kiep[0]);

function spawn(){
setTimeout(function(){
    ileKiepow=ileKiepow+1;
    player.KiepSpeed+=2;
    kontener.appendChild(kiep[1]);
    setTimeout(function(){
    ileKiepow=ileKiepow+1;
    player.KiepSpeed+=2;
    kontener.appendChild(kiep[2]);
    mana_spawn();
    serce_spawn();
}, 400);
}, 400);
}


let lot_mana={};
lot_mana=false
function mana_spawn(){
    lot_mana=true;
    mana.style.left = Math.random()*1300+1+"px";
    setTimeout(() => mana_spawn(),3000)
}


let lot_serce={};
lot_serce=false
function serce_spawn(){
    lot_serce=true;
    serce.style.left = Math.random()*1300+1+"px";
    setTimeout(() => serce_spawn(),3000)
}


let sekundy=60
let odli={};
odli=true;
function odliczanie(){
setTimeout(function(){
    console.log(sekundy);
    if(odli)sekundy-=1;
    odliczanie();
}, 4000);
}


let punkty = 0;
let ile = 0;

let moc1I = 0;
let moc1 = {};
let keyV = {};
let lot = [false,false,false,false,false,false,false,false];
let kiepY = [800,800,800,800,800,800,800,800];


function update(){

document.addEventListener("keydown",function(e){
		let key = e.keyCode;
		if(key===37){
			keyV.left = true;}
		else if(key===39){
			keyV.right = true;}
        else if(key===32 && pkt_many==3 || pkt_many>3){
            moc1 = true;
            player.w = 400;
            moc1I+=1;
            pkt_many=0;
            // getElementById("pky_many").value=0;
            setTimeout(function(){ player.w=100 }, 7000);
            } 
            
	});
	document.addEventListener("keyup",function(e){
		let key = e.keyCode;
		if(key===37){
			keyV.left = false;}
		else if(key===39){
			keyV.right = false}
	});



    let tempLeft = andzix.offsetLeft;
    if(keyV.left==true && tempLeft>10){
        tempLeft-=player.speed;}
    if(keyV.right==true && tempLeft<1340-player.w-10){
        tempLeft+=player.speed;}
    if(moc1==true){
        if(moc1I<50){}
        else{
            player.w = 100;
            moc1I=0;
            moc1 = false;
        }
    }

    andzix.style.left = tempLeft+"px";
    andzix.style.width = player.w + "px";
    leci();
    leci();
    leci_mana();
    leci_serce();
    

    if(player.zycia<0)koniec=true;
    document.getElementById("punkty").innerHTML = punkty;
    document.getElementById("zycia").innerHTML = player.zycia;
        if(koniec==false)player.animFrame = requestAnimationFrame(update);
        if(koniec==true){
            window.alert("zdobyles "+punkty+"punktow");
            location.reload();
        }
    };

    async function leci(){
        let kiepX = kiep[ile].offsetLeft;
        let x = andzix.offsetLeft;
        if(lot[ile]==false)
        {
        kiep[ile].style.left = Math.random()*1300+1+"px";
        kiep[ile].style.bottom = 800+"px";
        kiepY[ile]=722;
        lot[ile] = true;
        }
        if(lot[ile]==true)
        {
            if(kiepX>=x-25 && kiepX<=x+player.w)
            {
                if(kiepY[ile]<70){punkty=punkty+1;                  //drop z kiepow
                lot[ile]=false}
            }
            kiepY[ile]-=player.KiepSpeed;
            kiep[ile].style.bottom = kiepY[ile] + "px";
            if(kiepY[ile]<0){ lot[ile]=false;   player.zycia-=1;}
        }
        ile=ile+1;
        if(ile>ileKiepow)ile=0;
    };

    let pkt_many=0;
    let manaY=722;
    async function leci_mana(){
        let manaX = mana.offsetLeft;
        let x = andzix.offsetLeft;
        if(lot_mana==false){
        mana.style.bottom = 750+"px";
        manaY=750;
        }
        if(lot_mana==true)
        {
            mana.style.display="block"
            if(manaX>=x-25 && manaX<=x+player.w)
            {
                if(manaY<70){pkt_many+=1;document.getElementById("pkt_many").value= pkt_many;                      //drop z many
                lot_mana=false;mana.style.display="none"}
            }
            manaY-=player.KiepSpeed;
            mana.style.bottom = manaY + "px";
            if(manaY<0){lot_mana=false;mana.style.display="none"}
        }

    };


    let pkt_serce=0;
    let serceY=722;
    async function leci_serce(){
        let serceX = serce.offsetLeft;
        let x = andzix.offsetLeft;
        if(lot_serce==false){
        serce.style.bottom = 750+"px";
        serceY=750;
        }
        if(lot_serce==true)
        {
            serce.style.display="block"
            if(serceX>=x-25 && serceX<=x+player.w)
            {
                if(serceY<70){player.zycia+=1;document.getElementById("zycia").value=pkt_serce;                      //drop zycia
                lot_serce=false;serce.style.display="none"}
            }
            serceY-=player.KiepSpeed;
            serce.style.bottom = serceY + "px";
            if(serceY<0){lot_serce=false;serce.style.display="none"}
        }

    };

</script>


    </body>
</html>